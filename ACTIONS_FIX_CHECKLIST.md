# GitHub Actions ä¿®å¤éªŒè¯æ¸…å•

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. æ·»åŠ å†™æƒé™
```yaml
permissions:
  contents: write
```
**ä½œç”¨**ï¼šå…è®¸ GitHub Actions æäº¤å’Œæ¨é€ä»£ç 

---

### 2. æ·»åŠ è°ƒè¯•è¾“å‡º
æ–°å¢ "Debug - Show generated files" æ­¥éª¤ï¼Œæ˜¾ç¤ºï¼š
- âœ… articlesData.ts æ˜¯å¦ç”Ÿæˆ
- âœ… posts/ ç›®å½•å†…å®¹
- âœ… public/pdfs/ ç›®å½•å†…å®¹
- âœ… Git çŠ¶æ€

**ä½œç”¨**ï¼šå¸®åŠ©è¯Šæ–­è„šæœ¬æ˜¯å¦çœŸçš„ç”Ÿæˆäº†æ–‡ä»¶

---

### 3. å¢å¼º Git æäº¤æ­¥éª¤
```yaml
git add src/data/articlesData.ts posts/ public/pdfs/ data/processed_pdfs.json pdfs_to_process/
```
**ä½œç”¨**ï¼šç¡®ä¿æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶å’Œå¤„ç†åçš„ PDF éƒ½è¢«æäº¤

---

### 4. æ·»åŠ è¯¦ç»†æ—¥å¿—
æ¯ä¸ªå…³é”®æ­¥éª¤éƒ½æ·»åŠ äº† echo è¾“å‡º

**ä½œç”¨**ï¼šä¾¿äºè¿½è¸ªæ‰§è¡Œè¿‡ç¨‹

---

## ğŸ“‹ æäº¤å¹¶æµ‹è¯•

### æ­¥éª¤ 1ï¼šæäº¤ä¿®æ”¹

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd "/Users/lesley/Desktop/GitHub/Research Web/research-website"

git add .github/workflows/daily-insight.yml

git commit -m "fix: ä¿®å¤ GitHub Actions æƒé™å’Œæäº¤é—®é¢˜

- æ·»åŠ  permissions: contents: write
- æ·»åŠ è°ƒè¯•è¾“å‡ºæ­¥éª¤
- å¢å¼º git add åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶
- æ·»åŠ è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—"

git push origin main
```

---

### æ­¥éª¤ 2ï¼šæ‰‹åŠ¨è§¦å‘æµ‹è¯•

1. è®¿é—®ï¼š
   ```
   https://github.com/Lili202602/research-website/actions/workflows/daily-insight.yml
   ```

2. ç‚¹å‡» "Run workflow"

3. é€‰æ‹© `main` åˆ†æ”¯

4. ç‚¹å‡»ç»¿è‰²çš„ "Run workflow"

---

### æ­¥éª¤ 3ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

ç‚¹å‡»è¿è¡Œè®°å½•ï¼Œé‡ç‚¹æŸ¥çœ‹ï¼š

#### âœ… "Process single PDF" æ­¥éª¤
åº”è¯¥çœ‹åˆ°ï¼š
```
å¼€å§‹å¤„ç†ï¼šã€ç¡•è¿œå’¨è¯¢ã€‘2025å¹´ä¸­å›½å†œäº§å“åŠ å·¥è¡Œä¸šç ”ç©¶æŠ¥å‘Š.pdf
å·²å‘å¸ƒï¼šposts/20260210-xxx.html
```

#### âœ… "Debug - Show generated files" æ­¥éª¤
åº”è¯¥çœ‹åˆ°ï¼š
```
=== æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶ ===
articlesData.ts:
-rw-r--r-- 1 runner docker 1234 Feb 10 12:34 src/data/articlesData.ts

posts/:
-rw-r--r-- 1 runner docker 5678 Feb 10 12:34 20260210-xxx.html

public/pdfs/:
-rw-r--r-- 1 runner docker 964K Feb 10 12:34 ã€ç¡•è¿œå’¨è¯¢ã€‘2025å¹´ä¸­å›½å†œäº§å“åŠ å·¥è¡Œä¸šç ”ç©¶æŠ¥å‘Š.pdf

Git çŠ¶æ€:
M src/data/articlesData.ts
A posts/20260210-xxx.html
A public/pdfs/ã€ç¡•è¿œå’¨è¯¢ã€‘2025å¹´ä¸­å›½å†œäº§å“åŠ å·¥è¡Œä¸šç ”ç©¶æŠ¥å‘Š.pdf
M data/processed_pdfs.json
D pdfs_to_process/ã€ç¡•è¿œå’¨è¯¢ã€‘2025å¹´ä¸­å›½å†œäº§å“åŠ å·¥è¡Œä¸šç ”ç©¶æŠ¥å‘Š.pdf
```

#### âœ… "Check for changes" æ­¥éª¤
åº”è¯¥çœ‹åˆ°ï¼š
```
âœ… æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´
```

#### âœ… "Commit and push changes" æ­¥éª¤
åº”è¯¥çœ‹åˆ°ï¼š
```
=== æ·»åŠ æ–‡ä»¶åˆ° Git ===
=== æäº¤æ›´æ”¹ ===
=== æ¨é€åˆ°è¿œç¨‹ ===
âœ… æ¨é€æˆåŠŸ
```

---

## ğŸ” å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1ï¼šè„šæœ¬æ²¡æœ‰è¾“å‡º "å¼€å§‹å¤„ç†"

**åŸå› **ï¼š
- DEEPSEEK_API_KEY æœªé…ç½®
- PDF æ–‡ä»¶ä¸å­˜åœ¨
- processed_pdfs.json ä¸­å·²æ ‡è®°ä¸ºå·²å¤„ç†

**è§£å†³**ï¼š
1. æ£€æŸ¥ Secret é…ç½®
2. ç¡®è®¤ pdfs_to_process/ ä¸­æœ‰ PDF
3. æ¸…ç©º processed_pdfs.json

---

### é—®é¢˜ 2ï¼šè„šæœ¬æŠ¥é”™ "ç¼ºå°‘ç¯å¢ƒå˜é‡"

**åŸå› **ï¼šDEEPSEEK_API_KEY Secret æœªé…ç½®

**è§£å†³**ï¼š
```
è®¿é—®: https://github.com/Lili202602/research-website/settings/secrets/actions
æ·»åŠ : DEEPSEEK_API_KEY
```

---

### é—®é¢˜ 3ï¼šæ–‡ä»¶ç”Ÿæˆäº†ä½†æ²¡æœ‰æäº¤

**åŸå› **ï¼šä¹‹å‰ç¼ºå°‘ `permissions: contents: write`

**è§£å†³**ï¼šâœ… å·²ä¿®å¤ï¼ˆæœ¬æ¬¡æ›´æ–°ï¼‰

---

### é—®é¢˜ 4ï¼šAPI è°ƒç”¨è¶…æ—¶

**åŸå› **ï¼šPDF æ–‡ä»¶å¤ªå¤§æˆ–ç½‘ç»œé—®é¢˜

**è§£å†³**ï¼š
- ä½¿ç”¨è¾ƒå°çš„ PDF æ–‡ä»¶ï¼ˆ< 5MBï¼‰
- å¢åŠ è¶…æ—¶æ—¶é—´

---

## ğŸ¯ é¢„æœŸç»“æœ

æ‰§è¡ŒæˆåŠŸåï¼š

1. âœ… GitHub Actions æ˜¾ç¤ºç»¿è‰² âœ“
2. âœ… ä»“åº“ä¸­å‡ºç°æ–°çš„æäº¤ï¼ˆ"chore: è‡ªåŠ¨å‘å¸ƒæ¯æ—¥æ´å¯Ÿ"ï¼‰
3. âœ… `src/data/articlesData.ts` æ›´æ–°
4. âœ… `posts/` ä¸­æœ‰æ–°æ–‡ç« 
5. âœ… `public/pdfs/` ä¸­æœ‰ PDF
6. âœ… `pdfs_to_process/` ä¸­çš„ PDF è¢«åˆ é™¤
7. âœ… ç½‘ç«™è‡ªåŠ¨éƒ¨ç½²å¹¶æ˜¾ç¤ºæ–°æ–‡ç« 

---

## ğŸ“ ä¸‹ä¸€æ­¥

1. âœ… æäº¤ä¿®æ”¹ï¼ˆæ­¥éª¤ 1ï¼‰
2. âœ… æ‰‹åŠ¨è§¦å‘æµ‹è¯•ï¼ˆæ­¥éª¤ 2ï¼‰
3. âœ… æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼ˆæ­¥éª¤ 3ï¼‰
4. âœ… å‘Šè¯‰æˆ‘ç»“æœï¼

**æäº¤å®Œæˆåï¼Œç«‹å³æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æµ‹è¯•ï¼Œç„¶åæŠŠæ—¥å¿—å‘ç»™æˆ‘ï¼** ğŸš€

